---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Žiga Potrebuješ"
output:
  pdf_document:
    latex_engine: xelatex
    includes:
      in_header: lib/styles.sty
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

V projektu bom analiziral spreminjanje BDP, BDP p.c., stopnjo rasti, indeks cen, stopnjo inflacije in stopnjo brezposelnosti v ZDA od leta 1950 do 2014. Cilj je opaziti vzorce gibanja teh spremenljivk skozi čas, ter vpliv nemirnejših obdobjih na njih. Podatke bom pridobival na:

- http://www.multpl.com/us-gdp-inflation-adjusted/table
- http://www.multpl.com/us-real-gdp-per-capita
- http://www.multpl.com/us-real-gdp-growth-rate/table/by-year
- http://www.usinflationcalculator.com/inflation/consumer-price-index-and-annual-percent-changes-from-1913-to-2008/
- http://www.usinflationcalculator.com/inflation/historical-inflation-rates/
- http://www.multpl.com/unemployment/

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Iz različnih spletnih naslovov sem uvozil podatke. Ker je enih podatkov več (npr. že od leta 1929), drugih pa manj sem se odločil, da bom naredil razpon od let 1950-2014.


Primer kode, za uvoz in čiščenje tabele inflacij:
```{r razpredelnice, warning=FALSE, results='hide', message=FALSE}
naslov5 = "http://www.usinflationcalculator.com/inflation/historical-inflation-rates/"
usinf <- readHTMLTable(naslov5, which=1, encoding = "UTF-8", stringsAsFactors = FALSE)
usinf <- usinf[-c(1), c(1, 14)]
usinf[[1]] <- strapplyc(usinf[[1]], "([0-9]+)$") %>% as.numeric()
usinf[[2]] <- strapplyc(usinf[[2]], "^([-, 0-9.]+)") %>% as.numeric()
colnames(usinf) <- c("Leto", "Stopnja inflacije (v %)")
usinf <- usinf %>% filter(Leto <= 2014 & Leto >= 1950)
usinf <- usinf %>% arrange(Leto)
```

Čiščenje podatkov je potekalo po sledečem postopku:

- podatke sem pridobil iz spleta s pomočjo ukaza readHTMLTable
- če je imela tabela stolpce z nerelevantnimi podatki sem jih izpustil
- ker sem želel v prvem stolpcu vsake tabele letnico, ki jo je program prepoznal kot numerično vrednost in ne kot niz, sem iz prvih stolpcev pobral le cifre 0-9 (ki so bile na koncu niza), in jih zapisal kot numerično vrednost
- za lažjo obdelavo podatkov sem tudi v drugem stolpcu želel imeti numerične vrednosti. Zato sem zopet iz vsake celice vzel le cifre od 0-9, upošteval predznak - in dane vrednosti zapisal nazaj kot numerične vrednosti
- nato sem poimenoval stolpce
- dodal sem filter, ki mi je izpisal samo vrstice kjer je leto <= 2014 in leto >= 1950
- najbolj smiselna urejenost (predvsem za graf) se mi je zdela naraščujoča po letih, zato sem po potrebi graf še uredil po naraščujočih letnicah


```{r graf1, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf1)
```


```{r graf2, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf2)
```


```{r graf3, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf3)
```


```{r graf4, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf4)
```


```{r graf5, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf5)
```


```{r graf6, echo=FALSE, warning=FALSE, results='hide', message=FALSE}
plot(graf6)
```